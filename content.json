{"pages":[],"posts":[{"title":"ACFの投稿オブジェクト参照で、現在の投稿と同じ言語のもののみを出力させる【Bogo・ACF】","text":"多言語プラグインのBogoを使用していると、多言語の投稿も、普通の投稿と同じ扱いなので、特に日本語と中国語で、タイトルが全く一緒になってどの言語か見分けがつかなくなることがあります。 このままでは利便性が悪いので、各言語の投稿に絞り込めるよう、クエリーを制御します。 実装ACF側で投稿オブジェクトのクエリーを制御するフックが用意されているのでそれを使用します。ACF | acf/fields/post_object/query 12345678910function my_post_object_query( $args, $field, $post_id ) { $locale = get_post_meta( $post_id, &apos;_locale&apos;, true ); $args[&apos;post_status&apos;] = &apos;publish&apos;; $args[&apos;meta_key&apos;] = &apos;_locale&apos;; $args[&apos;meta_value&apos;] = $locale; return $args;}add_filter(&apos;acf/fields/post_object/query&apos;, &apos;my_post_object_query&apos;, 10, 3); ↑このコード例ではすべての投稿オブジェクトに反映されます 管理画面でget_locale()すると、現在のユーザーが選択している言語情報で取得してしまうので、記事に紐付いているBogoの_localeのカスタムフィールドを確認して、Bogoのmeta_keyに代入し、絞り込んでいます。","link":"/blog/2019/06/07/acf-post-object-bogo/"},{"title":"Hexoのテーマ：icarusインストール時に出たエラーの解決法","text":"icarusの導入時につまずく nodeをアップデート icarusの導入時につまずくthemesディレクトリにicarusをインストールしたまではよかったものの、 1$ hexo server すると、以下のようなエラーを吐いてしまいました。 123456789101112131415161718192021222324252627ERROR Script load failed: themes/icarus/scripts/index.js/Users/xxxx/project/blog/blog/themes/icarus/includes/specs/config.spec.js:14 ...require('./meta.spec'), ^^^SyntaxError: Unexpected token ... at Object.exports.runInThisContext (vm.js:76:16) at Module._compile (module.js:542:28) at Object.Module._extensions..js (module.js:579:10) at Module.load (module.js:487:32) at tryModuleLoad (module.js:446:12) at Function.Module._load (module.js:438:3) at Module.require (module.js:497:17) at require (internal/module.js:20:19) at Object.&lt;anonymous&gt; (/Users/xxxx/project/blog/blog/themes/icarus/includes/tasks/check_config.js:8:18) at Module._compile (module.js:570:32) at Object.Module._extensions..js (module.js:579:10) at Module.load (module.js:487:32) at tryModuleLoad (module.js:446:12) at Function.Module._load (module.js:438:3) at Module.require (module.js:497:17) at require (/Users/xxxx/project/blog/blog/node_modules/hexo/lib/hexo/index.js:227:21) at /Users/xxxx/project/blog/blog/themes/icarus/scripts/index.js:3:1 at fs.readFile.then.script (/Users/xxxx/project/blog/blog/node_modules/hexo/lib/hexo/index.js:240:12) at tryCatcher (/Users/xxxx/project/blog/blog/node_modules/bluebird/js/release/util.js:16:23) at Promise._settlePromiseFromHandler (/Users/xxxx/project/blog/blog/node_modules/bluebird/js/release/promise.js:512:31) at Promise._settlePromise (/Users/xxxx/project/blog/blog/node_modules/bluebird/js/release/promise.js:569:18) at Promise._settlePromise0 (/Users/xxxx/project/blog/blog/node_modules/bluebird/js/release/promise.js:614:10) nodeをアップデートどうやらnodeのバージョンが古いためエラーを吐いている様子なので、nodebrewでアップデート。 1$ nodebrew use latest use v11.10.0にすることで、無事コンパイルが通りました。","link":"/blog/2019/03/03/icarus_error/"}],"tags":[{"name":"Bogo","slug":"Bogo","link":"/blog/tags/Bogo/"},{"name":"Hexo","slug":"Hexo","link":"/blog/tags/Hexo/"}],"categories":[{"name":"Tec","slug":"Tec","link":"/blog/categories/Tec/"}]}